---
interface Certification {
  name: string;
  issuer: string;
  fullName: string;
  notes: string;
  score?: string;
  level?: string;
}

interface Props {
  lang: "es" | "en";
  t: any;
}

const { t } = Astro.props;
const content = t.aboutUs.certifications;
const items = content.items as Certification[];
---

<style is:global>
  .cert-fade-up {
    opacity: 0;
    transform: translateY(18px);
    transition: all 0.7s ease-out;
  }

  .cert-fade-up.is-visible {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<section class="relative py-20 px-4 bg-[var(--background-color)] overflow-hidden">
  <!-- Fondo de puntos -->
  <div
    class="absolute inset-0 z-0 opacity-[0.20]
           [background-size:18px_18px]
           [background-image:radial-gradient(#d8d8d8_1px,transparent_1px)]"
  ></div>

  <div class="relative z-10 max-w-6xl mx-auto">
    <!-- TÃTULO -->
    <div class="text-left mb-10 cert-fade-up">
      <h2 class="text-3xl md:text-4xl font-bold text-[var(--brand-black)]">
        {content.title}
      </h2>

      <p class="mt-3 text-sm md:text-base text-slate-600 max-w-3xl leading-relaxed">
        {content.description}
      </p>
    </div>

    <!-- GRID -->
    <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
      {items.map((item) => (
        <article
          class="cert-fade-up bg-white rounded-3xl border border-slate-200 shadow-sm
                 px-6 py-7 flex flex-col gap-3 text-left
                 transition-all duration-200
                 hover:-translate-y-1 hover:shadow-lg hover:border-[var(--brand-primary)]/40"
        >

          <!-- Nombre -->
          <h3 class="text-lg font-bold text-[var(--brand-black)]">
            {item.name}
          </h3>

          <!-- Issuer -->
          <p class="text-sm font-medium text-[var(--brand-blue)]">
            {item.issuer}
          </p>

          <!-- Nombre completo -->
          <p class="text-xs italic text-slate-500">
            {item.fullName}
          </p>

          <!-- Notas -->
          <p class="text-sm text-slate-600 leading-relaxed">
            {item.notes}
          </p>
        </article>
      ))}
    </div>
  </div>
</section>

<script>
  if (typeof window !== "undefined" && "IntersectionObserver" in window) {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("is-visible");
          } else {
            entry.target.classList.remove("is-visible");
          }
        });
      },
      { threshold: 0.18 }
    );

    document.querySelectorAll(".cert-fade-up").forEach((el) =>
      observer.observe(el)
    );
  }
</script>
